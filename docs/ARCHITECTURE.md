# Архитектура (FSD Lite)

Проект следует методологии **Feature-Sliced Design (FSD)** в облегченном варианте. Это обеспечивает слабую связность модулей и масштабируемость.

## Слои (Layers)

Структура папок строго иерархична. **Импорты разрешены только сверху вниз** (слой выше может импортировать слой ниже, но не наоборот).

1. **`app/`** — Инициализация приложения.
   - Роутинг, глобальные стили, провайдеры (QueryClient, Theme).
   - Точка входа.

2. **`pages/`** — Сборка страниц из виджетов и фич.
   - *Примеры:* `home`, `cart`, `locations`.
   - Страницы не содержат сложной логики, только композицию.

3. **`widgets/`** — Самостоятельные блоки страницы.
   - Объединяют фичи и сущности.
   - *Примеры:* `sticky-header` (шапка), `product-feed` (лента товаров), `checkout-drawer` (шторка оплаты).

4. **`features/`** — Пользовательские сценарии (действия).
   - *Примеры:* `add-to-cart` (кнопка добавления), `select-shop` (выбор магазина), `cart-summary-bar` (плашка с итогом).
   - Часто содержат локальный стейт или специфичные мутации.

5. **`entities/`** — Бизнес-сущности.
   - *Примеры:* `product` (карточка товара), `shop` (инфо о кафе), `cart` (элемент корзины).
   - Содержат UI-компоненты (Card, Row) и модели данных (Zod схемы, Typescript интерфейсы).
   - **Важно:** Сущности не должны зависеть от других сущностей напрямую (кросс-импорты запрещены, используйте `shared` или композицию в виджетах).

6. **`shared/`** — Переиспользуемый код, не привязанный к бизнесу.
   - UI Kit (кнопки, инпуты), API клиент, хуки, утилиты (`cn`), Zod схемы API.

## Правила разработки

1. **Slice First:** Каждая директория внутри слоя (кроме shared) — это слайс (например, `entities/product`). Внутри слайса структура:
   - `ui/` — компоненты React.
   - `model/` — сторы (Zustand), хуки.
   - `lib/` — вспомогательные функции.

2. **Public API:** Если модуль должен использоваться снаружи, экспортируйте его явно (в текущей версии мы используем прямые импорты, но концептуально стараемся держать модули изолированными).

3. **Бизнес-логика:**
   - Логика *отображения* -> в компонентах (`ui`).
   - Логика *данных* -> в сторах (`model`) или API хуках.
   - Логика *взаимодействия* -> в фичах (`features`).
